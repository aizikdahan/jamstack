<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Options Summary</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-950 text-slate-100 p-6">

  <div id="app" class="max-w-7xl mx-auto"></div>

  <script>
  async  function renderOptionsHTML(data) {
      const { all, summary } = data;

      const cards = `
        <div class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-8">
          ${card("Total Invest", `$${all.invest}`)}
          ${card("Open Trades", all.open)}
          ${card("Closed Trades", all.closed)}
          ${card("Total Gain", `$${all.gain}`)}
          ${card("Gain %", `${all.gainPercent}%`)}
        </div>
      `;

      const rows = summary.map(t => `
        <tr class="border-b border-slate-800 hover:bg-slate-900">
          <td class="px-4 py-3 font-medium">${t.underlying}</td>
          <td class="px-4 py-3 text-xs text-slate-400">${t.optionSymbol}</td>
          <td class="px-4 py-3">${t.buyDate}</td>
          <td class="px-4 py-3">${t.entryPrice}</td>
          <td class="px-4 py-3">$${t.invest}</td>
          <td class="px-4 py-3 ${t.isOpen ? 'text-green-400' : 'text-red-400'}">
            ${t.isOpen ? 'OPEN' : 'CLOSED'}
          </td>
        </tr>
      `).join("");

      const table = `
        <div class="overflow-x-auto rounded-xl border border-slate-800">
          <table class="w-full text-sm">
            <thead class="bg-slate-900 text-slate-400 uppercase text-xs">
              <tr>
                <th class="px-4 py-3 text-left">Underlying</th>
                <th class="px-4 py-3 text-left">Option</th>
                <th class="px-4 py-3 text-left">Buy Date</th>
                <th class="px-4 py-3 text-left">Entry</th>
                <th class="px-4 py-3 text-left">Invest</th>
                <th class="px-4 py-3 text-left">Status</th>
              </tr>
            </thead>
            <tbody>
              ${rows}
            </tbody>
          </table>
        </div>
      `;

      return cards + table;
    }

    function card(label, value) {
      return `
        <div class="bg-slate-900 border border-slate-800 rounded-xl p-4">
          <div class="text-xs text-slate-400 mb-1">${label}</div>
          <div class="text-xl font-semibold">${value}</div>
        </div>
      `;
    }
    const url = "https://"+localStorage.getItem("api");
    let key = localStorage.getItem("key");
    if(!key){
         key = promt("Enter key");
        localStorage.setItem("key",key)
    };

    const headers = {
 "X-API-KEY":key
    }
    const urlapi =url+"/summary";
    // usage
    const raw = await fetch(urlapi,{headers});
    const data = await raw.json();
    document.getElementById("app").innerHTML = renderOptionsHTML(data);
  </script>

</body>
</html>
